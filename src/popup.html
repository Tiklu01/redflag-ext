<!DOCTYPE html>
<html>
<head>
  <title>ATS Checker</title>
  <style>
    body { 
      margin: 0;
      height: 100%; 
      overflow: hidden;  /* Prevent scrollbars in the body */
    }
    iframe { 
      width: 100%; 
      height: 100%; 
      border: none;
      min-width: 600px;
      min-height: 800px;
    }
  </style>
</head>
<body>
    <iframe id="popupFrame" src="https://redflag-ext-gqaq.vercel.app/popup" frameborder="0"></iframe>

    <script>
      // Detect if the iframe causes a reload or unexpected closure
      const iframe = document.getElementById('popupFrame');

      // Listen for any unexpected behavior like window.close() or reload from iframe
      window.onbeforeunload = function(event) {
        // If the iframe is trying to close the window, prevent it.
        if (iframe.contentWindow.document) {
          // Check if the iframe content contains window.close()
          if (iframe.contentWindow.window.close) {
            event.preventDefault();  // This prevents closing the window
            return "The popup window is trying to close.";
          }
        }
      };
      
      // Prevent form submission or page refresh in iframe content
      iframe.onload = function() {
        const iframeDocument = iframe.contentWindow.document;
        
        // Check if there's a form, and prevent submission
        const forms = iframeDocument.querySelectorAll('form');
        forms.forEach(form => {
          form.addEventListener('submit', function(event) {
            event.preventDefault();  // Prevent form submission, keeping the popup open
          });
        });
      };
    </script>
</body>
</html>
